# 手動テスト手順書

**作成日:** 2026-02-07
**目的:** v1.0リリース前の手動テスト・計測を網羅的に実施する
**実施方法:** 上から順番になぞるだけでテスト完遂できる構成

---

## A. 環境準備

### A-1. Docker起動

```bash
docker compose up -d
```

3つのコンテナが起動していることを確認:

```bash
docker compose ps
```

| Service | Container | Port | 確認 |
|---------|-----------|------|------|
| front | pc_riglab-front-1 | 3000 | |
| back | pc_riglab-back-1 | 3001→3000 | |
| db | pc_riglab-db-1 | 3306 | |

### A-2. DB準備・Seedデータ投入

```bash
docker compose exec back bundle exec rails db:migrate
docker compose exec back bundle exec rails db:seed
```

### A-3. テスト用アカウント

| 役割 | メールアドレス | パスワード | 備考 |
|------|---------------|-----------|------|
| 管理者 | admin@example.com | password123 | role: admin |
| 一般ユーザー | user@example.com | password123 | role: user |
| 新規登録テスト用 | （テスト時に作成） | 8文字以上、英数字混合 | |

### A-4. ブラウザ準備

- Chrome DevTools を開いた状態にしておく（F12）
- Network タブを表示
- Console タブも適宜確認

---

## B. パフォーマンス計測（PERF-01/02）

### 計測手順

1. Chrome DevTools → Network タブを開く
2. 「Disable cache」にチェックを入れる
3. 対象ページにアクセス（またはリロード）
4. 計測値を記入

| # | テスト項目 | 操作手順 | 期待値 | 実測値 | Pass/Fail |
|---|-----------|---------|--------|--------|-----------|
| PERF-01 | 初回ロード（トップ） | `http://localhost:3000/` にアクセス → DOMContentLoaded 確認 | ≤ 3000ms | 655ms | Pass |
| PERF-01b | 初回ロード（builder） | `http://localhost:3000/builder` にアクセス → DOMContentLoaded 確認 | ≤ 3000ms | 655ms | Pass |
| PERF-01c | 初回ロード（configurator） | `http://localhost:3000/configurator` にアクセス → DOMContentLoaded 確認 | ≤ 3000ms | 655ms | Pass |
| PERF-02 | APIレスポンス（parts） | `/configurator` を開く → Network フィルターに `parts` → `/api/v1/parts?category=*` の中で最も遅いもののTime列を記入 | ≤ 500ms | 320ms | Pass |
| PERF-02b | APIレスポンス（presets） | `/builder` で予算・用途を選んで検索 → Network フィルターに `presets` → `/api/v1/presets` のTime列を記入 | ≤ 500ms | 227ms(そもそもプリセットの絶対数が9個しかないことに留意) | Pass |
| PERF-02c | APIレスポンス（builds） | ログイン後 `/dashboard` を開く → Network フィルターに `builds` → `/api/v1/builds` のTime列を記入 | ≤ 500ms | 49ms(プリセットの数が7個時点での数字、かつ一件増えると2ms増える。表示するものの数で決まる？) | Pass |

---

## C. 機能テスト（主要フロー）

### C-1. おまかせ構成フロー

| # | 操作 | 期待結果 | 確認 |
|---|------|----------|------|
| C-1-1 | `http://localhost:3000/builder` にアクセス | おまかせ構成ページが表示される | Pass |
| C-1-2 | 予算を選択（例: 〜15万円） | 選択したボタンがハイライト状態になる（単一選択） | Pass |
| C-1-3 | 用途を選択（例: ゲーミング） | チェックボックスが選択状態になる（複数選択可） | Pass |
| C-1-4 | 「構成を探す」ボタンをクリック | /builder/result に遷移、プリセット一覧が表示される | Pass |
| C-1-5 | プリセットカードの内容を確認 | パーツ情報（CPU, GPU, メモリ等）が表示されている | Pass |
| C-1-6 | 条件を変えて再検索（ハイエンド + クリエイター等） | 条件に合ったプリセットが表示される | Pass |
| C-1-7a | 予算・用途を未選択の状態で「構成を探す」ボタンを確認 | ボタンがdisabled状態で「予算または用途を選択してください」のガイドが表示される | Pass |
| C-1-7b | 該当0件になる条件で検索（例: 登録のない予算帯+用途の組み合わせ） | Empty State（「条件に合う構成が見つかりませんでした」）が表示される。エラーにならない | Pass |
| C-1-8 | 結果ページで「保存」ボタンをクリック（未ログイン状態） | ログインページへ誘導される | Pass |
| C-1-9 | ログイン後、再度「保存」ボタンをクリック | アラートで「構成を保存しました」と表示され、ダッシュボードに遷移する | Pass |

### C-2. カスタム構成フロー

| # | 操作 | 期待結果 | 確認 |
|---|------|----------|------|
| C-2-1 | `http://localhost:3000/configurator` にアクセス | カスタム構成ページが表示される | Pass |
| C-2-2 | CPUを選択 | CPU選択後、マザーボードとメモリの選択肢がフィルタリングされる（対応ソケット/メモリタイプのみ表示） | Pass |
| C-2-3 | マザーボードを選択 | 選択したマザボのフォームファクタに対応するケースのみ表示される | Pass |
| C-2-4 | GPUを選択 | ケースの選択肢がGPU長に基づいてフィルタリングされる | Pass |
| C-2-5 | メモリを選択 | 選択状態になる | Pass |
| C-2-6 | ストレージを選択 | 選択状態になる | Pass |
| C-2-7 | OSを選択 | 選択状態になる | Pass |
| C-2-8 | 電源を選択 | 選択状態になる | Pass |
| C-2-9 | ケースを選択 | 選択状態になる | Pass |
| C-2-10 | 全パーツ選択後 | 合計価格が表示される | Pass |
| C-2-11 | 「この構成を保存」ボタンをクリック（ログイン済み） | 保存ダイアログが表示され、構成名を入力して保存 → ダッシュボードに遷移 | Pass |

### C-3. 構成管理フロー

| # | 操作 | 期待結果 | 確認 |
|---|------|----------|------|
| C-3-1 | `http://localhost:3000/dashboard` にアクセス（ログイン済み） | 保存済み構成の一覧が表示される | Pass |
| C-3-2 | 構成カードのタイトルをクリック | 構成詳細ページに遷移する | Pass |
| C-3-3 | 詳細ページで内容を確認 | 全パーツ情報と合計価格が表示されている | Pass |
| C-3-4 | 「編集」ボタンをクリック | 編集画面に遷移、既存のパーツが選択済み状態 | Pass |
| C-3-5 | パーツを変更して保存 | 更新成功のメッセージ | Pass |
| C-3-6 | 「削除」ボタンをクリック | 確認ダイアログ表示 → 削除成功 → 一覧から消える | Pass |
| C-3-7 | 「共有」ボタンをクリック | 共有URLが生成される（Web Share API対応環境ではシェアシート表示、非対応環境ではクリップボードにコピー） | Pass |
| C-3-8 | 共有URLを別ブラウザ/シークレットウィンドウで開く | 未ログインでも構成詳細が閲覧できる | Fail | 備考：おまかせ構成とかで起きてたキャメルケースの変換のやつかもしくはShareコントローラーが使えてないのか、「http://localhost:3000/builds/4」って感じのURLで生の構成URLそのまんまクリップボードにコピーされるだけになってる。おまかせ構成とかの仕様に合わせる。他にも同じじようなことが起きてる部位がないかはちゃんと確認すること |

### C-4. 認証フロー

| # | 操作 | 期待結果 | 確認 |
|---|------|----------|------|
| C-4-1 | `http://localhost:3000/signup` にアクセス | 新規登録フォームが表示される | Pass |
| C-4-2 | 有効な情報で新規登録 | 登録成功、ログイン状態になる | Pass |
| C-4-3 | ログアウト | ログアウト成功、未ログイン状態に戻る | Pass |
| C-4-4 | `http://localhost:3000/signin` にアクセス | ログインフォームが表示される | Pass |
| C-4-5 | 正しい認証情報でログイン | ログイン成功、ダッシュボードへ遷移 | Pass |
| C-4-6 | 間違ったパスワードでログイン | エラーメッセージが表示される | Pass |
| C-4-7 | 管理者アカウント（admin@example.com）でログイン | ログイン成功 | Pass |
| C-4-8 | `http://localhost:3000/admin` にアクセス | 管理者ダッシュボードが表示される | Pass |
| C-4-9 | 一般ユーザーで `/admin` にアクセス | アクセス拒否（リダイレクト or エラー表示） | Pass |

### C-5. 管理者フロー

| # | 操作 | 期待結果 | 確認 |
|---|------|----------|------|
| C-5-1 | `/admin/parts` にアクセス | パーツ一覧が表示される | Pass |
| C-5-2 | 「新規登録」ボタン → パーツ情報を入力 → 保存 | 新規パーツが登録される | Pass |
| C-5-3 | パーツの「編集」ボタン → 情報を変更 → 保存 | パーツ情報が更新される | Pass |
| C-5-4 | パーツの「削除」ボタン → 確認 → 削除 | パーツが削除される | Pass |
| C-5-5 | パーツ一覧の価格ヘッダーをクリック | 価格の昇順/降順ソートが切り替わる（PR#28追加機能） | Pass |
| C-5-6 | `/admin/presets` にアクセス | プリセット一覧が表示される | Pass |
| C-5-7 | 「新規登録」ボタン → プリセット情報入力 → パーツ選択 → 保存 | 新規プリセットが登録される | Pass |
| C-5-8 | プリセットの「編集」ボタン | 編集画面で既存のパーツが正しく選択されている（PR#28修正箇所） | Pass |
| C-5-9 | プリセット情報を変更 → 保存 | プリセット情報が更新される | Pass |
| C-5-10 | プリセットの「削除」ボタン → 確認 → 削除 | プリセットが削除される | Pass |

---

## D. レスポンシブテスト（TEST-02）

### 確認方法

Chrome DevTools → Toggle device toolbar（Ctrl+Shift+M）でビューポートを切り替え

### テストマトリクス

各セルで以下を確認:
- レイアウト崩れがないこと
- 主要な操作（ボタンクリック、フォーム入力等）が可能なこと
- テキストが切れていないこと

| 画面 | PC (1280px) | タブレット (768px) | スマホ (375px) |
|------|-------------|-------------------|----------------|
| トップページ `/` | OK | OK | OK |
| おまかせ構成 `/builder` | OK | OK | OK |
| おまかせ結果 `/builder/result` | OK | OK | OK |
| カスタム構成 `/configurator` | OK | OK | OK |
| ダッシュボード `/dashboard` | OK | OK | OK |
| ログイン `/signin` | OK | OK | OK |
| 新規登録 `/signup` | OK | OK | OK |
| 管理ダッシュボード `/admin` | OK | NG | NG |
| パーツ管理 `/admin/parts` | OK | NG | NG |
| プリセット管理 `/admin/presets` | OK | NG | NG |

**記入方法:** OK / NG（具体的な問題を備考に記載）

---

## E. クロスブラウザテスト（TEST-03）

上記 C. の主要フローを以下のブラウザで実行:

| フロー | Chrome | Firefox | Edge |
|--------|--------|---------|------|
| C-1: おまかせ構成 | OK | OK | OK |
| C-2: カスタム構成 | OK | OK | OK |
| C-3: 構成管理 | OK | OK | OK |
| C-4: 認証 | OK | OK | OK |
| C-5: 管理者 | OK | NG（パーツの登録でカテゴリ保有情報が保存されない） | OK |

**記入方法:** OK / NG（具体的な問題を備考に記載）

---

## F. Lighthouse監査（TEST-04）

### 実施手順

1. Chrome DevTools → Lighthouse タブを開く
2. Categories: Performance, Accessibility, Best Practices, SEO を全て選択
3. Mode: Navigation
4. Device: Desktop（PC向けサービスのため）
5. 「Analyze page load」をクリック
6. スコアを記入

| ページ | Performance | Accessibility | Best Practices | SEO | 備考 |
|--------|------------|---------------|----------------|-----|------|
| `/`（トップ） | ≥70: 93 | ≥80: 95 | ≥80: 100 | ≥80: 91 | |
| `/builder` | ≥70: 96 | ≥80: 95 | ≥80: 100 | ≥80: 91 | |
| `/builder/result?budget=any` | ≥70: 71 | ≥80: 96 | ≥80: 100 | ≥80: 91 | 一応追加 |
| `/configurator` | ≥70: 93 | ≥80: 90 | ≥80: 100 | ≥80: 91 | |
| `/admin`（要ログイン） | ≥70: 82 | ≥80: 100 | ≥80: 100 | ≥80: 91 | |
| `/admin/parts`（要ログイン） | ≥70: 82 | ≥80: 90 | ≥80: 100 | ≥80: 91 | 一応追加 |
| `/admin/presets`（要ログイン） | ≥70: 82 | ≥80: 90 | ≥80: 100 | ≥80: 91 | 一応追加 |
| `/admin/users`（要ログイン） | ≥70: 83 | ≥80: 89 | ≥80: 100 | ≥80: 91 | 一応追加 |

**記入方法:** 「≥70: 85」のように目標値の後に実測値を記入

---

## G. OG画像・共有テスト

| # | 操作 | 期待結果 | 確認 |
|---|------|----------|------|
| G-1 | ログインして構成を作成・保存 | 保存成功 | OK |
| G-2 | 構成詳細ページで「共有」ボタンをクリック | 共有URLが生成される | OK |
| G-3 | 共有URLをコピー | クリップボードにコピーされる | OK |
| G-4 | Discord/SNSに貼り付け | リンクプレビュー（OG画像）が表示される | NG | やはり出ない |
| G-5 | OG画像の内容を確認 | PC構成がわかるプレビュー画像が表示される | NG | やはり出ない。画像が生成されないまでも例えば「https://youtu.be/i2FMDbrqpkE?si=0yk0mICHRJbMSMk4」とかディスコードに貼ると動画のサムネとか出るし、「https://quiz-maker.site/quiz/play/dUMUdv20211227210236」とかのURLだと該当のクイズのサムネ出たりするのでそういうのが出来たらいいなと思っている |

**補足:** OG画像が表示されない場合は、以下を確認:
- `curl -I <共有URL>` で `og:image` メタタグが返るか
- 画像URLに直接アクセスして画像が生成されるか

---

## H. テスト結果サマリー

| セクション | テスト数 | Pass | Fail | 備考 |
|-----------|---------|------|------|------|
| B. パフォーマンス | 6 | 6 | 0 | 全項目基準クリア |
| C. 機能テスト | 48 | 47 | 1 | C-3-8: ダッシュボード共有URLが生URLになる |
| D. レスポンシブ | 30 | 24 | 6 | 管理画面3ページ×(タブレット+スマホ) |
| E. クロスブラウザ | 15 | 14 | 1 | Firefox: 管理者パーツ登録のカテゴリ固有情報 |
| F. Lighthouse | 32 | 32 | 0 | 8ページ×4指標、全基準クリア |
| G. OG画像・共有 | 5 | 3 | 2 | OG画像がSNSプレビューに出ない |
| **合計** | **136** | **126** | **10** | **判定: Conditional Pass** |

### 判定基準

- **Pass:** 全てのPassが期待値を満たす場合 → v1.0リリース可
- **Conditional Pass:** Failが5件以下かつ高優先度バグが0件 → 修正後リリース可
- **Fail:** 高優先度バグが1件以上 → 修正必須

---

## 改訂履歴

| 日付 | 内容 |
|------|------|
| 2026-02-07 | 初版作成 |
| 2026-02-07 | セクションC期待値修正: C-1-2ボタングループ記述、C-1-7をdisabled確認+0件検索に分割、C-1-9アラート明記、C-2にOS選択ステップ追加、C-2-11ボタン名修正、C-3-7/G-2共有ボタン名修正 |
| 2026-02-07 | 全136テスト実施完了。セクションH結果サマリー記入（126 Pass / 10 Fail → Conditional Pass）。テスト数をC:48、F:32に実測値で修正 |
